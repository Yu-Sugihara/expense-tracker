# レシート自動読み取りが可能な割り勘アプリ（仮）

## ユースケース一覧

---

### RM レシート管理

| UC ID | ユースケース名 | 説明 |
| -------- | -------------------- | -------------------------------------------------------------------------------------------------- |
| UC-RM-01 | レシートを読取（アップロード／撮影） | ユーザーがスマホやPCからレシート画像をアップロードまたは撮影して登録する。自動読取が開始され、通知で完了が伝えられる。|
| UC-RM-02 | レシート一覧を条件で絞り込み表示 | 期間（開始日～終了日）、カテゴリ（例：食費、交通費）、店舗、金額帯（最小～最大）でフィルタ可能。並び替え（日時降順、金額降順）にも対応。※一覧画面には店舗、日時、カテゴリ、税込合計金額、割り勘分担設定ステータス（✅（全ての支出項目に割り勘分担設定済み）、⚠️（一部または全ての支出項目に割り勘分担未設定））を表示 |
| UC-RM-03 | レシートの内容を確認 | 店舗、日付、時間、支払方法、税抜合計金額、税込合計金額、税、支出項目一覧（商品名、支払額、カテゴリ、単価、数量、税抜、税込、割引、割引理由、割り勘分担、メモ）、登録日時を閲覧可能。 |
| UC-RM-04 | レシートを削除 | 不要なレシートを削除する。削除前に関連する支出データも同時に削除するかどうかを確認する。                                                       |
| UC-RM-05 | レシート情報を更新 | 店舗、日付、時刻、支払方法、税抜合計金額、税込合計金額、税、支出項目一覧、登録日時を更新する。支出項目の修正には、新規入力・更新・削除のほか、既存支出項目の検索と再紐づけも含まれる。 |
| UC-RM-06 | レシートの読取ステータスを表示 | 読取ステータスに応じて、✅（読取済みかつ合計金額一致かつ手動修正なし）、🛠️（読取済みかつ合計金額一致かつ手動修正あり）🔄（読取中）、❌（読取失敗）、⚠️（読取済みかつ合計金額不一致）などを表示。※⚠️＝レシートに含まれる支出項目の合計が読み取った合計と一致しない場合。 |

---

### EM 支出管理

| UC ID | ユースケース名 | 説明 |
| -------- | ----------------- | -------------------------------------------------------------------------------- |
| UC-SP-01 | 支出項目を手動で登録 | 商品名、支払者（複数可）、支払額（支払者が複数いる場合は支払者ごとに入力）、カテゴリ、単価、数量、税抜、税込、割引、割引理由、店舗、日付、時間、支払方法、割り勘分担（支払者ごとの比率または金額）、メモを入力し支出項目を登録する。 |
| UC-SP-02 | 支出項目の詳細を表示 | 商品名、支払者（複数可）、支払額（支払者が複数いる場合は支払者ごとに入力）、カテゴリ、単価、数量、税抜、税込、割引、割引理由、店舗、日付、時間、支払方法、割り勘分担（支払者ごとの比率または金額）、メモ、登録レシート、登録種別（手動／OCR）を確認できる。 |
| UC-SP-03 | 支出項目を手動で更新 | 登録済みの支出項目を更新する。商品名、支払者（複数可）、支払額（支払者が複数いる場合は支払者ごとに入力）、カテゴリ、単価、数量、税抜、税込、割引、割引理由、店舗、日付、時間、支払方法、割り勘分担（支払者ごとの比率または金額）、メモ、登録レシートを更新できる。 |
| UC-SP-04 | 支出項目を削除 | 不要な支出項目を削除する。 |
| UC-SP-05 | 支出項目をレシートと手動で紐づけ／解除 | 登録済み支出と任意のレシートを後から関連付けたり、解除したりする。 |
| UC-SP-06 | 支出項目一覧を条件でフィルタ表示 | 支払者、カテゴリ、店舗、金額帯、期間、割り勘分担（支払者ごとの比率または金額）、清算状態、登録種別（手動／OCR）、レシート紐づけステータスでフィルタできる。※一覧画面には商品名、支払者（複数可）、支払額（支払者が複数いる場合は支払者ごとに入力）、カテゴリ、店舗、購入日、割り勘分担（支払者ごとの比率または金額）、レシート紐づけステータス（「🧾」または空欄）を表示 |

---

### ST 清算管理

| UC ID | ユースケース名 | 説明 |
| -------- | -------------- | ------------------------------------------------------- |
| UC-ST-01 | 自分の貸し借り金額を確認 | 自分の支払うべき金額（借り）または受け取れる金額（貸し）を確認。差し引き合計は画面上部に常に表示し、各ユーザーに対する貸し借りの一覧は専用画面で確認する。 |
| UC-ST-02 | 清算 | 相手への支払を入力して借りを減らす、または自分への支払いを入力して貸しを減らす。貸し借り一覧から清算する貸し借りをクリックし、支払額、支払方法、支払日を入力する。 |
| UC-ST-03| 清算確認 | 相手が支払を入力した場合、自分がその支払い内容を確認（本当に支払いが行われているか確認することを想定）する。 |

---

### PJ プロジェクト管理

| UC ID | ユースケース名 | 説明 |
| -------- | -------------- | ------------------------------------------------------- |
| UC-PJ-01 | プロジェクト一覧を表示 | 所属しているプロジェクトの一覧を表示する。各プロジェクトのプロジェクト名、参加メンバー、貸し借り合計を確認できる。 |
| UC-PJ-02 | プロジェクトを作成 | 家計、旅行などを管理するためのプロジェクトを作成する。初期設定でメンバー追加、名称、デフォルト比率を指定可能。 |
| UC-PJ-03 | プロジェクトにユーザーを招待 | 招待リンク／メールなどで他ユーザーを追加（メールアドレス）する。 |
| UC-PJ-04 | プロジェクトに参加 | 招待リンク／メール経由でプロジェクトに参加する。 |
| UC-PJ-05 | プロジェクトを削除 | プロジェクト作成者のみが削除可能。他のユーザーのデータが含まれる場合、確認プロンプトを表示。 |
| UC-PJ-06 | デフォルト割り勘ルールを設定 | プロジェクト配下の支払項目に自動適用される割り勘ルール（等分、比率で按分）を設定する。支払項目の新規追加時に当該ルールが自動適用されて割り勘分担が設定される（後から手動変更可）。 |
| UC-PJ-07 | デフォルトカテゴリ設定 | プロジェクトは以下の支払項目に自動適用されるカテゴリを設定する。支払項目の新規追加時に当該カテゴリが自動適用される（後から手動変更可）。 |
| UC-PJ-08 | プロジェクトを脱退 | 自身が参加しているプロジェクトから脱退できる。ただし、脱退前にそのユーザーの貸し借り差額が ±0円以下 であることが条件。 |

---

### CT カテゴリ管理

| UC ID | ユースケース名 | 説明 |
| -------- | -------------- | ------------------------------------------------------- |
| UC-CT-01 | カテゴリを追加 | 支出項目のカテゴリ（例：食費、生活費）を新規作成する。カテゴリ名、割り勘ルール（等分、比率で按分）を設定する。カテゴリはプロジェクト単位で管理する（以下同）。 |
| UC-CT-02 | カテゴリを更新 | 既存カテゴリのカテゴリ名、割り勘ルールを更新する。 |
| UC-CT-03 | カテゴリを削除 | 既存カテゴリを削除する。 |

---

### NT 通知

| UC ID | ユースケース名 | 説明 |
| -------- | ----------------- | ------------------------------------------------------ |
| UC-NT-01 | レシート読取完了通知を受け取る | レシート画像の自動処理の完了（正常に完了／失敗／合計金額不一致）を通知。失敗以外の場合は、通知クリックでレシート情報画面に遷移。通知クリックで既読になる。 |
| UC-NT-02 | レシート更新通知を受け取る | レシート情報を更新した際に通知を受け取る。 |
| UC-NT-03 | レシート削除通知を受け取る | レシートを削除した際に通知を受け取る。 |
| UC-NT-04 | 支出項目追加 | 支出項目を新規追加した際に通知を受け取る。 |
| UC-NT-05 | 支出項目更新 | 支出項目を更新した際に通知を受け取る。 |
| UC-NT-06 | 支出項目削除 | 支出項目を削除した際に通知を受け取る。 |
| UC-NT-07 | 清算通知を受け取る | 他ユーザーが自身への支払いを入力した場合、その内容の確認依頼として通知される。通知クリックで清算確認画面に遷移。通知クリックで既読になる。  |
| UC-NT-08 | 清算確認通知を受け取る | 自身が入力した清算に対し、相手が確認を完了した旨の通知が届く。通知クリックで既読になる。  |
| UC-NT-09 | プロジェクト参加通知を受け取る | 他ユーザーがプロジェクトに参加した際に通知を受け取る。 |
| UC-NT-10 | プロジェクト脱退通知を受け取る | 他ユーザーがプロジェクトを脱退した際に通知を受け取る。 |
| UC-NT-11 | プロジェクト招待通知を受け取る | 未参加プロジェクトへの招待が届いた際に通知を受け取る。通知クリックでプロジェクトの参加画面へ遷移。 |
| UC-NT-12 | カテゴリ追加通知を受け取る | カテゴリを追加した際に通知を受け取る。 |
| UC-NT-13 | カテゴリ更新通知を受け取る | カテゴリを更新した際に通知を受け取る。 |
| UC-NT-14 | カテゴリ削除通知を受け取る | カテゴリを削除した際に通知を受け取る。 |
| UC-NT-15 | 通知一覧を表示 | 未読／既読の通知をリストで確認可能。既読ボタンクリックで既読処理。 |
| UC-NT-16 | 通知を設定する | 受領する通知の種類（レシート読込完了／読込失敗／合計金額不一致、レシート追加支出項目追加／更新／削除、清算／清算確認、プロジェクト参加／脱退／招待）、アクター（自ユーザー操作／他ユーザー操作）、通知方法（面上の通知／メール通知）を設定する。プロジェクト招待通知のメール通知はOFFにできない。 |

---

## UM ユーザー管理（User Management）

| UC ID | ユースケース名 | 説明 |
| ------------ | ----------------- | --------------------------------------------------------------------------------------------- |
| UC-UM-01 | ユーザーを新規登録する | ユーザーが、メールアドレス・パスワード・ニックネームを入力して自身でアカウントを登録する。登録完了後、自動でログイン状態になる。                  |
| UC-UM-02 | ユーザーがログインする       | 登録済みのメールアドレスとパスワードを用いてログインする。失敗時はエラーメッセージを表示する。                                               |
| UC-UM-03 | ユーザーがログアウトする      | 現在のログイン状態を解除し、セッションを破棄する。                                                                     |
| UC-UM-04 | ユーザー情報を更新する       | ログイン中のユーザーが、自分のメールアドレス・パスワード・ニックネームのいずれかを変更できる。パスワード変更時は現在のパスワード認証を行う。                        |
| UC-UM-05 | ユーザーが退会する         | ログイン中のユーザーが、自身のアカウントを削除する。 |

---

### EX エクスポート

| UC ID        | ユースケース名           | 説明                                                                                            |
| ------------ | ----------------- | --------------------------------------------------------------------------------------------- |
| UC-EX-01 | 清算履歴・支出データをエクスポート | フィルタ条件で絞り込んだ支出データ・清算履歴をCSVまたはPDF形式でエクスポートできる。 |

---

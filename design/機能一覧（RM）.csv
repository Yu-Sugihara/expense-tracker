機能ID,機能カテゴリ,機能名,説明,トリガー,入力,出力,実行環境,実現方法,関連UC ID
F-RM-01-01,レシート自動読取,レシート画像を選択,ユーザーがスマホやPCから画像ファイルを選択してレシート画像をアップロードする。,ユーザー操作（「レシート読取」→「画像ファイルを選択」）,-,リサイズ前画像データ,フロントエンド,"モバイル、またはWebブラウザのファイル選択機能で画像選択（<input type=""file"">）。",UC-RM-01
F-RM-01-02,レシート自動読取,レシート画像をカメラ撮影,ユーザーがカメラで撮影してレシート画像をアップロードする。,ユーザー操作（「レシート読取」→「カメラで撮影」）,-,リサイズ前画像データ,フロントエンド,モバイル、またはブラウザのカメラ撮影機能で画像撮影（react-webcam）。,UC-RM-01
F-RM-01-03,レシート自動読取,レシート画像をリサイズ,選択、またはカメラ撮影した画像をアップロード前にリサイズする。,F-RM-01-01、またはF-RM-01-02の完了,リサイズ前画像データ,リサイズ後画像データ,フロントエンド,リサイズ前画像データをCanvasでリサイズ。,UC-RM-01
F-RM-01,レシート自動読取,レシート画像のアップロード,リサイズした画像をS3へアップロードする。,F-RM-01-03の完了,リサイズ後画像データ,-,"フロントエンド
バックエンド","Amplify StorageモジュールのStorage.putを使用し、access levelに""private""を指定することで、Cognito認証済みユーザー専用のパス（private/${cognito-identity-id}/）にアップロードする。パス指定やsubの取得は不要で、IAMロールによりアクセス制御される。",UC-RM-01
F-RM-01,レシート自動読取,アップロード済み画像をOCR＋構造化読み取り,S3に保存された画像に対しOCRとGPT構造化処理を行い、支出項目などの情報を抽出する。,画像アップロード後の自動処理または再読取指示,S3キー,構造化済JSON、読取ステータス、通知,,LambdaがCloud Vision APIとGPTを用いて画像からJSON形式で情報抽出。,"UC-RM-01, UC-RM-05"
F-RM-04,レシート手動追加,レシート情報を手動で追加,画像を使わずに店舗、日時、支出項目などを手動で入力してレシートを登録する。,ユーザー操作（手動入力）,店舗、日時、支払方法、支出項目一覧、プロジェクトID,レシートID、支出項目ID,,フォーム入力値を検証し、DynamoDBにレコードを登録。,UC-RM-02
F-RM-05,レシート確認,レシート情報の確認,登録済みレシートの内容（店舗、日時、支出項目など）を画面上で確認する。,ユーザー操作（詳細表示）,レシートID,レシート詳細情報,,DynamoDBからレシートと支出情報を取得してUIに出力。,UC-RM-03
F-RM-06,レシート削除,レシートを削除,不要なレシートを削除し、関連支出の削除有無をユーザーに確認する。,ユーザー操作（削除実行）,レシートID、関連支出削除フラグ,削除結果、通知,,DynamoDBの対象データを削除し、通知を送信。,UC-RM-04
F-RM-07,レシート更新,レシート情報を更新,レシートの店舗名・日時・支出項目などの情報を更新する。,ユーザー操作（更新実行）,レシートID、更新内容,更新結果、通知,,フォーム入力を検証し、DynamoDB上の既存データを更新。,UC-RM-05
F-RM-08,レシート再読取,レシート画像の差し替え,既存レシートの画像を新しい画像に差し替える。OCR再読取は任意で実行可能。,ユーザー操作（画像アップロード）,レシートID、新画像、再読取フラグ,差し替え結果、S3キー、通知,,旧画像をS3で置換、オプションでOCR再実行をトリガー。,UC-RM-05
F-RM-09,,レシート一覧の絞り込み表示,期間やカテゴリなどの条件でフィルタリングされたレシート一覧を表示する。,ユーザー操作（条件入力・検索実行）,検索条件（期間、カテゴリ、店舗、金額帯）,レシートリスト,,DynamoDBに対してQuery/Scan実行し、条件に合致したデータを返す。,UC-RM-06
F-RM-10,,読取ステータスの表示,"読取の成否や再読取状態に応じたアイコン（✅, 🛠️, 🔄, ❌, ⚠️）を表示する。",画面表示時,レシートID,ステータスアイコン,,レシートのOCR結果と修正状況をもとにステータスを表示。,UC-RM-07
